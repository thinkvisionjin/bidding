<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
    <title id='Description'>jqxEditor represents a ready-for-use HTML editor which can simplify web content creation or be a replacement of your HTML Text Areas.</title>
    <link rel="stylesheet" href="{{=URL('static','css/vendor/jqwidgets/styles/jqx.base.css')}}" type="text/css" />
    <link type="text/css" rel="Stylesheet" href="{{=URL('static','css/site.css')}}" />
    <script type="text/javascript" src="{{=URL('static','js/vendor/jquery/jquery-1.11.1.min.js')}}"></script>
    <script type="text/javascript" src="{{=URL('static','js/vendor/jqwidgets/demos.js')}}"></script>
    <script type="text/javascript" src="{{=URL('static','js/vendor/jqwidgets/jqxcore.js')}}"></script>
    <script type="text/javascript" src="{{=URL('static','js/vendor/jqwidgets/jqxbuttons.js')}}"></script>
    <script type="text/javascript" src="{{=URL('static','js/vendor/jqwidgets/jqxscrollbar.js')}}"></script>
    <script type="text/javascript" src="{{=URL('static','js/vendor/jqwidgets/jqxlistbox.js')}}"></script>
    <script type="text/javascript" src="{{=URL('static','js/vendor/jqwidgets/jqxdropdownlist.js')}}"></script>
    <script type="text/javascript" src="{{=URL('static','js/vendor/jqwidgets/jqxdropdownbutton.js')}}"></script>
    <script type="text/javascript" src="{{=URL('static','js/vendor/jqwidgets/jqxcolorpicker.js')}}"></script>
    <script type="text/javascript" src="{{=URL('static','js/vendor/jqwidgets/jqxwindow.js')}}"></script>
    <script type="text/javascript" src="{{=URL('static','js/vendor/jqwidgets/jqxeditor.js')}}"></script>
    <script type="text/javascript" src="{{=URL('static','js/vendor/jqwidgets/jqxtooltip.js')}}"></script>
    <script type="text/javascript" src="{{=URL('static','js/vendor/jqwidgets/jqxdata.js')}}"></script> 
    <script type="text/javascript" src="{{=URL('static','js/vendor/jqwidgets/jqxinput.js')}}"></script>
    <script type="text/javascript" src="{{=URL('static','js/vendor/jqwidgets/jqxcheckbox.js')}}"></script>
    <script type="text/javascript" src="{{=URL('static','js/vendor/jqwidgets/jqxexpander.js')}}"></script>
    <script type="text/javascript" src="{{=URL('static','js/vendor/jqwidgets/jqxgrid.js')}}"></script>
    <script type="text/javascript" src="{{=URL('static','js/vendor/jqwidgets/jqxgrid.pager.js')}}"></script>
    <script type="text/javascript" src="{{=URL('static','js/vendor/jqwidgets/jqxgrid.selection.js')}}"></script> 
    <script type="text/javascript" src="{{=URL('static','js/vendor/jqwidgets/jqxgrid.columnsresize.js')}}"></script>
    
</head>
<body>
    <script type="text/javascript">
    	function delggmx()
    	{
            var selectedrowindex = $("#ggmx-grid").jqxGrid('getselectedrowindex');
            var rowscount = $("#ggmx-grid").jqxGrid('getdatainformation').rowscount;
            if (selectedrowindex >= 0 && selectedrowindex < rowscount) {
                var id = $("#ggmx-grid").jqxGrid('getrowid', selectedrowindex);
                var commit = $("#ggmx-grid").jqxGrid('deleterow', id);
            }    		
    	}
        $(document).ready(function () {
        	$("#zbgg-expander").jqxExpander({ toggleMode: 'none',  showArrow: false });
        	$("#ggmx-expander").jqxExpander({ toggleMode: 'none',  showArrow: false });
			$("#ggmx-grid").jqxGrid({height:"250", width:"97%",
				 columns: [
					  { text: '标书编号', datafield: 'code',  width: '13%', cellsalign: 'center', align: 'center' },
					  { text: '标书名称', datafield: 'title', cellsalign: 'center', align: 'center' },
					  { text: '状态', datafield: 'status', width: '8%', cellsalign: 'center', align: 'center' },
					  { text: '预招标日期', datafield: 'yzbtime', width: '13%', cellsalign: 'center', align: 'center',  cellsformat:'yyyy-MM-dd' },
					  {
		                  text: '操作', editable: false, datafield: 'delete',
		                  cellsrenderer: function (index, datafield, value, defaultvalue, column, rowdata) {
		                	  var a = '<a style="padding-top:3px;height:15px;text-decoration:none;" class="MdyBtn" onclick="delggmx()">删除</a>';
		                	  var a = '<div class="jqx-grid-cell-middle-align" style="margin-top: 6px;">'+a+'</div>';
		                      return a;
		                  }
					  }
					],
					showtoolbar: true,
	                rendertoolbar: function (toolbar) {
	                    var me = this;
	                    var container = $("<div style='margin: 5px;'></div>");
	                    toolbar.append(container);
	                    container.append('<input id="addzbmx" type="button" value="选择招标书" />');
	                    $("#addzbmx").jqxButton({template:'success'});
	                }					

				});
			$("#wggzb-grid").jqxGrid({height:"250", width:"97%",
				 columns: [
					  { text: '选择', columntype: 'checkbox', datafield: 'xz' },
					  { text: '标书编号', datafield: 'code',  width: '13%', cellsalign: 'center', align: 'center' },
					  { text: '标书名称', datafield: 'title', cellsalign: 'center', align: 'center' },
					  { text: '状态', datafield: 'status', width: '8%', cellsalign: 'center', align: 'center' },
					  { text: '预招标日期', datafield: 'yzbtime', width: '13%', cellsalign: 'center', align: 'center',  cellsformat:'yyyy-MM-dd' },
					],
					showstatusbar: true,
	                renderstatusbar: function (toolbar) {
	                    var me = this;
	                    var container = $("<div style='margin: 5px;'></div>");
	                    toolbar.append(container);
	                    container.append('<input id="xzwggzb" type="button" value="选择" />');
	                    $("#xzwggzb").jqxButton({template:'success'});
	                }					

				});		
			$("#wggzb-grid").jqxGrid({editable: true});
			$("#xzwggzb").click(function () {

				

			});   			
        	$("#title").jqxInput({width:200,height: 25 });
            $('#editor').jqxEditor({height:250
            });

			$("#popupWindow").jqxWindow({
				width: 800, height:400, resizable: false,  modalOpacity:0.5, isModal: true, autoOpen: false
			});
			$("#addzbmx").click(function () {

				$("#popupWindow").jqxWindow('open');

			});           
			var ggmxid = $("#id").val();
            var url = "getggmx?id="+ggmxid;
            // prepare the data
            var source =
            {
                datatype: "json",
                datafields: [
                    { name: 'code', type: 'string' },
                    { name: 'title', type: 'string' },
                    { name: 'status', type: 'string' },
                    { name: 'yzbtime', type: 'date' }
                ],
                id: 'id',
                url: url
            };
            var dataAdapter = new $.jqx.dataAdapter(source);
            $("#ggmx-grid").jqxGrid({source:dataAdapter});
  			
            var url = "getwggzb";
            var source =
            {
                datatype: "json",
                datafields: [
                    { name: 'code', type: 'string' },
                    { name: 'title', type: 'string' },
                    { name: 'status', type: 'string' },
                    { name: 'yzbtime', type: 'date' }
                ],
                id: 'id',
                url: url
            };
            var dataAdapter = new $.jqx.dataAdapter(source);   
            $("#wggzb-grid").jqxGrid({width:500, source:dataAdapter});
            
        });
    </script>
    <div id="zbgg-expander">
    <div>发布中标公告</div>
    <div > 
    <table style='margin: 1.5%;'>
    	<tr>
    		<input id="id" style="display:none" value={{=id}}></input>
    		<td width="8%">
    			标题:
    		</td>
    		<td width="25%">
    			<input id="title" value={{=title}}></input>
    		</td>    	
    		<td width="13%">
    			发布日期:
    		</td>
    		<td width="25%">
    			{{=addtime}}
    		</td>     			
    	</tr>
    	<tr>
    		<td>
    			详细信息:
    		</td>
    		<td colspan=3>
			    <textarea id="editor">
			        {{=content}}
			    </textarea>    		
    		</td>     	
    	</tr>
    </table>
    </div>
	</div>
	<br/>
    <div id="ggmx-expander">
    <div>选择招标书</div>
    <div> 
    	<div id='ggmx-grid' style='margin: 1.5%;'></div>
    </div>
    </div>	
    
           <div id="popupWindow">
           <div>银行流水确认</div>
            <div style="overflow: hidden;">
                <table align="center"  height="100%">
                    <tr>
                        <td align="right">搜索:</td>
                        <td align="left"><input type="text" id="projectcode"/></td>
                    </tr>
                    <tr>
                        <td align="right"></td>
                        <td align="left"><div id="wggzb-grid"></div></td>
                    </tr>


                </table>
            </div>
       </div>
</body>
</html>